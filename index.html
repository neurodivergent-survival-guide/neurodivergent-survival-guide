---
layout: default
title: "The Neurodivergent Survival Guide"
---
<!-- index.html -->
<!-- Add Fuse.js CDN to head section -->
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2"></script>

<style>
    :root {
        --aurora-start: #4a5568;
        --aurora-mid: #2d3748;
        --aurora-end: #1a202c;
        --rainbow-1: #ff6b6b;
        --rainbow-2: #feca57;
        --rainbow-3: #48dbfb;
        --rainbow-4: #ff9ff3;
        --rainbow-5: #54a0ff;
        --rainbow-6: #5f27cd;
        --text-primary: #333;
        --text-secondary: #555;
        --text-light: #666;
        --card-background: rgba(255, 255, 255, 0.95);
        --glass-background: rgba(255, 255, 255, 0.1);
        --glass-border: rgba(255, 255, 255, 0.2);
        --steel-light: #718096;
        --steel-dark: #4a5568;
        --steel-darker: #2d3748;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        font-weight: 500;
        background: linear-gradient(135deg, var(--aurora-start) 0%, var(--aurora-mid) 50%, var(--aurora-end) 100%);
        background-size: 400% 400%;
        animation: auroraShift 20s ease infinite;
        color: var(--text-primary);
        min-height: 100vh;
        line-height: 1.7;
        position: relative;
        overflow-x: hidden;
    }

    @keyframes auroraShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
            radial-gradient(circle at 20% 80%, var(--rainbow-1) 0%, transparent 50%),
            radial-gradient(circle at 80% 20%, var(--rainbow-2) 0%, transparent 50%),
            radial-gradient(circle at 40% 40%, var(--rainbow-3) 0%, transparent 50%);
        opacity: 0.1;
        z-index: -2;
        animation: floatColors 30s ease-in-out infinite;
    }

    @keyframes floatColors {
        0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.1; }
        50% { transform: translateY(-20px) rotate(5deg); opacity: 0.15; }
    }

    body::after {
        content: '∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞ ∞';
        position: fixed;
        top: 0;
        left: 0;
        width: 200%;
        height: 200%;
        font-size: 2rem;
        color: rgba(255, 255, 255, 0.03);
        z-index: -1;
        transform: rotate(-15deg);
        line-height: 4rem;
        pointer-events: none;
        animation: infinityFloat 40s linear infinite;
    }

    @keyframes infinityFloat {
        0% { transform: rotate(-15deg) translateX(0); }
        100% { transform: rotate(-15deg) translateX(-50%); }
    }

    .hero {
        background: var(--glass-background);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        padding: 3rem 2rem;
        text-align: center;
        border-bottom: 1px solid var(--glass-border);
        position: relative;
    }

    .hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, 
            var(--rainbow-1), var(--rainbow-2), var(--rainbow-3), 
            var(--rainbow-4), var(--rainbow-5), var(--rainbow-6), var(--rainbow-1));
        background-size: 300% 100%;
        animation: rainbowShift 8s ease infinite;
    }

    @keyframes rainbowShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .hero h1 {
        color: white;
        font-size: 2.5rem;
        font-weight: 400;
        margin-bottom: 1rem;
        background: linear-gradient(135deg, #fff, #e0e7ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .hero p {
        color: rgba(255, 255, 255, 0.9);
        font-size: 1.2rem;
        max-width: 600px;
        margin: 0 auto 2rem;
    }

    /* Search Styles */
    .search-section {
        max-width: 500px;
        margin: 2rem auto 0;
        position: relative;
        z-index: 999999;
        isolation: isolate;
    }

    .search-box {
        width: 100%;
        padding: 1rem 1.5rem;
        font-size: 1.1rem;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 25px;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        color: white;
        outline: none;
        transition: all 0.3s ease;
    }

    .search-box::placeholder {
        color: rgba(255, 255, 255, 0.7);
    }

    .search-box:focus {
        border-color: var(--steel-light);
        background: rgba(255, 255, 255, 0.25);
        box-shadow: 0 0 0 3px rgba(113, 128, 150, 0.2);
        border-radius: 25px 25px 12px 12px;
    }

    .search-icon {
        position: absolute;
        right: 1.5rem;
        top: 50%;
        transform: translateY(-50%);
        color: rgba(255, 255, 255, 0.7);
        font-size: 1.2rem;
        pointer-events: none;
    }

    .search-results {
        position: fixed;
        top: auto;
        left: auto;
        right: auto;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(15px);
        border-radius: 0 0 16px 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        max-height: 400px;
        overflow-y: auto;
        z-index: 999999;
        display: none;
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-top: none;
        min-width: 500px;
    }

    .search-results.show {
        display: block;
    }

    .search-result-item {
        padding: 12px 20px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        cursor: pointer;
        transition: background-color 0.2s ease;
        text-decoration: none;
        color: inherit;
        display: block;
    }

    .search-result-item:hover {
        background: rgba(113, 128, 150, 0.1);
        text-decoration: none;
        color: inherit;
    }

    .search-result-item:last-child {
        border-bottom: none;
    }

    .result-title {
        font-weight: 600;
        color: #333;
        margin-bottom: 4px;
        font-size: 0.95rem;
    }

    .result-condition {
        display: inline-block;
        background: var(--steel-light);
        color: white;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.75rem;
        font-weight: 500;
        margin-left: 8px;
        text-transform: uppercase;
    }

    .result-condition.adhd { background: #d63031; }
    .result-condition.autism { background: #27ae60; }
    .result-condition.bipolar { background: #74b9ff; }
    .result-condition.bpd { background: #f39c12; }
    .result-condition.ocd { background: #a29bfe; }

    .result-description {
        color: #666;
        font-size: 0.85rem;
        line-height: 1.4;
        margin-top: 4px;
    }

    .no-results {
        padding: 20px;
        text-align: center;
        color: #666;
        font-style: italic;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
        width: 100%;
        box-sizing: border-box;
    }

    .intro-section {
        background: var(--card-background);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 2.5rem;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        margin-bottom: 3rem;
        text-align: center;
        border: 1px solid rgba(255, 255, 255, 0.2);
        position: relative;
        z-index: 1;
    }

    .intro-section h2 {
        color: var(--text-primary);
        margin-bottom: 1.5rem;
        font-size: 1.8rem;
        font-weight: 400;
    }

    .intro-section p {
        font-size: 1.1rem;
        color: var(--text-secondary);
        margin-bottom: 1.5rem;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
    }

    .main-sections {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 2rem;
        margin: 3rem 0;
    }

    .section-card {
        background: var(--card-background);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 2rem;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
        cursor: pointer;
        text-decoration: none;
        color: inherit;
        border: 1px solid rgba(255, 255, 255, 0.2);
        position: relative;
        overflow: hidden;
    }

    .section-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .conditions-card::before {
        background: linear-gradient(90deg, var(--rainbow-4), var(--rainbow-1));
    }

    .struggles-card::before {
        background: linear-gradient(90deg, var(--rainbow-3), var(--rainbow-5));
    }

    .toolkits-card::before {
        background: linear-gradient(90deg, #8b7355, #5d4037);
    }

    .section-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 45px rgba(0, 0, 0, 0.12);
        color: inherit;
        text-decoration: none;
    }

    .section-card:hover::before {
        opacity: 1;
    }

    .card-icon {
        width: 60px;
        height: 60px;
        border-radius: 15px;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
        position: relative;
        overflow: hidden;
    }

    .conditions-card .card-icon {
        background: linear-gradient(45deg, var(--rainbow-4), var(--rainbow-1));
    }

    .struggles-card .card-icon {
        background: linear-gradient(45deg, var(--rainbow-3), var(--rainbow-5));
    }

    .toolkits-card .card-icon {
        background: linear-gradient(45deg, #8b7355, #5d4037);
    }

    .section-card h3 {
        font-size: 1.4rem;
        margin-bottom: 1rem;
        color: var(--text-primary);
    }

    .section-card p {
        color: var(--text-light);
        margin-bottom: 1rem;
    }

    .section-examples {
        font-size: 0.9rem;
        color: #888;
        font-style: italic;
    }

    /* FEATURED ARTICLES SECTION */
    .featured-section {
        background: var(--card-background);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 2.5rem;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        margin: 3rem 0;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .featured-section h2 {
        color: var(--text-primary);
        margin-bottom: 1rem;
        font-size: 1.8rem;
        font-weight: 400;
        text-align: center;
    }

    .featured-section > p {
        text-align: center;
        color: var(--text-secondary);
        margin-bottom: 2rem;
        font-size: 1rem;
    }

    .featured-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1.5rem;
    }

    .featured-card {
        background: rgba(248, 249, 255, 0.8);
        backdrop-filter: blur(5px);
        padding: 1.5rem;
        border-radius: 16px;
        text-decoration: none;
        color: inherit;
        transition: all 0.3s ease;
        border-left: 4px solid;
        display: flex;
        flex-direction: column;
    }

    .featured-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        background: rgba(248, 249, 255, 0.95);
    }

    .featured-card-title {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
    }

    .featured-card-subtitle {
        font-size: 0.9rem;
        color: var(--text-secondary);
        line-height: 1.4;
        flex-grow: 1;
    }

    .featured-card-condition {
        display: inline-block;
        background: var(--steel-light);
        color: white;
        padding: 2px 8px;
        border-radius: 8px;
        font-size: 0.7rem;
        font-weight: 500;
        margin-top: 0.8rem;
        text-transform: uppercase;
        width: fit-content;
    }

    .featured-card-condition.adhd { background: #d63031; }
    .featured-card-condition.autism { background: #27ae60; }
    .featured-card-condition.bipolar { background: #74b9ff; }
    .featured-card-condition.bpd { background: #f39c12; }
    .featured-card-condition.ocd { background: #a29bfe; }

    /* RANDOM STRUGGLES SECTION */
    .random-section {
        background: var(--card-background);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 2.5rem;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        margin: 3rem 0;
        border: 1px solid rgba(255, 255, 255, 0.2);
        text-align: center;
    }

    .random-section h2 {
        color: var(--text-primary);
        margin-bottom: 1rem;
        font-size: 1.8rem;
        font-weight: 400;
    }

    .random-section > p {
        color: var(--text-secondary);
        margin-bottom: 2rem;
        font-size: 1rem;
    }

    @keyframes seamlessRainbow {
        from { background-position: 0px 0; }
        to { background-position: 900px 0; }
    }

    .random-button {
        background: linear-gradient(90deg, 
            #ff6b6b 0px, #feca57 150px, #48dbfb 300px, 
            #ff9ff3 450px, #54a0ff 600px, #5f27cd 750px,
            #ff6b6b 900px);
        background-size: 900px 100%;
        background-repeat: repeat-x;
        animation: seamlessRainbow 30s linear infinite;
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 25px;
        font-size: 1.1rem;
        font-weight: 500;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        margin-bottom: 2rem;
        box-shadow: 0 4px 15px rgba(72, 219, 251, 0.3);
    }

    .random-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(72, 219, 251, 0.4);
    }

    .random-button:active {
        transform: translateY(0);
    }

    .random-struggles {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
        margin-top: 2rem;
    }

    .random-struggle-card {
        background: rgba(248, 249, 255, 0.8);
        backdrop-filter: blur(5px);
        padding: 1.2rem;
        border-radius: 12px;
        text-decoration: none;
        color: inherit;
        transition: all 0.3s ease;
        border-bottom: 3px solid;
    }

    .random-struggle-card:hover {
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(113, 128, 150, 0.3);
    }

    .random-struggle-title {
        font-weight: 600;
        font-size: 0.95rem;
        margin-bottom: 0.3rem;
    }

    .random-struggle-subtitle {
        font-size: 0.85rem;
        opacity: 0.9;
    }

    /* Share Experience Section */
    .share-experience {
        background: var(--card-background);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 2rem;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
        margin: 3rem 0;
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-left: 4px solid var(--steel-light);
    }

    .share-experience h3 {
        color: var(--steel-dark);
        margin-bottom: 1rem;
        font-size: 1.3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }

    .share-experience > p {
        color: var(--text-secondary);
        margin-bottom: 1.5rem;
        font-size: 0.95rem;
        text-align: center;
    }

    .contribution-types {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1rem;
        margin: 1.5rem 0;
    }

    .contrib-item {
        background: rgba(248, 249, 255, 0.8);
        backdrop-filter: blur(5px);
        padding: 1rem;
        border-radius: 12px;
        border-left: 3px solid var(--steel-light);
        transition: all 0.3s ease;
        font-size: 0.9rem;
        line-height: 1.5;
    }

    .contrib-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(113, 128, 150, 0.15);
    }

    .contrib-item strong {
        color: #333;
        display: block;
        margin-bottom: 0.3rem;
    }

    .email-cta {
        background: rgba(255, 255, 255, 0.9);
        padding: 1.5rem;
        border-radius: 12px;
        text-align: center;
        margin-top: 1.5rem;
        border: 2px solid rgba(113, 128, 150, 0.2);
    }

    .email-cta a:hover {
        color: var(--steel-dark);
        text-decoration: underline;
    }

    .tip-jar {
        background: rgba(255, 248, 240, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 2rem;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
        text-align: center;
        margin: 3rem 0;
        border: 1px solid rgba(255, 165, 0, 0.2);
        border-left: 4px solid #ff7675;
    }

    .tip-jar h3 {
        color: #ff7675;
        margin-bottom: 1rem;
        font-size: 1.3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }

    .tip-jar p {
        color: var(--text-secondary);
        margin-bottom: 1rem;
        font-size: 0.95rem;
    }

    .tip-jar .kofi-info {
        background: rgba(255, 255, 255, 0.8);
        padding: 1rem;
        border-radius: 12px;
        margin: 1.5rem 0;
        font-weight: 600;
        color: #333;
        border: 2px solid rgba(255, 118, 117, 0.3);
    }

    /* Mobile responsive */
    @media (max-width: 768px) {
        .search-section {
            max-width: 90%;
            margin: 1rem auto;
        }
        
        .search-box {
            font-size: 1rem;
            padding: 0.8rem 1.2rem;
        }
        
        .search-results {
            max-height: 60vh;
            min-width: unset;
            width: 90vw !important;
            left: 5vw !important;
            right: 5vw !important;
            border-radius: 0 0 12px 12px;
        }
        
        .crisis-resources {
            padding: 12px !important;
            font-size: 0.9rem;
        }
        
        .crisis-resources a[href^="tel:"] {
            font-size: 1rem !important;
        }
        
        .featured-grid {
            grid-template-columns: 1fr;
        }

        .random-struggles {
            grid-template-columns: 1fr;
        }

        .main-sections {
            grid-template-columns: 1fr;
        }
        
        .hero {
            padding: 2rem 1rem;
        }
        
        .hero h1 {
            font-size: 2rem;
        }
        
        .hero p {
            font-size: 1rem;
        }
        
        .container {
            padding: 1rem;
        }
    }
</style>

<div class="hero">
    <h1>The Neurodivergent Survival Guide</h1>
    <p>Navigate daily friction points with understanding, practical tools, and community wisdom from those who understand the journey</p>
    
    <div class="search-section">
        <input type="text" class="search-box" placeholder="Search for conditions, struggles, or symptoms..." id="searchBox" autocomplete="off" spellcheck="false">
        <div class="search-results" id="searchResults"></div>
        <span class="search-icon">🔍</span>
    </div>
</div>

<div class="container">
    <main role="main" id="main-content">
        <div class="intro-section" id="get-started">
            <h2>Understanding Your Daily Struggles</h2>
            <p>If you're here, daily life probably feels harder than it should. Maybe conversations drain you, simple tasks feel impossible, or you can't figure out why everyone else seems to have an instruction manual you never received.</p>
            <p>You're not broken. Your brain just works differently in a world designed for different types of processors. The friction you experience comes from this mismatch, not from any flaw in you.</p>
            <p>This guide helps you understand why specific situations create challenges and gives you practical tools to navigate them. It's organized around real daily experiences, not clinical categories.</p>
        </div>

        <div class="main-sections">
            <a href="{{ '/conditions/index.html' | relative_url }}" class="section-card conditions-card">
                <div class="card-icon">🧠</div>
                <h3>Understand Your Brain</h3>
                <p>Comprehensive guides to how different neurotypes create friction in daily life. Learn about the broader patterns that might explain multiple struggles you're experiencing.</p>
                <div class="section-examples">Autism • ADHD • Bipolar • BPD • OCD</div>
            </a>

            <a href="{{ '/struggles/index.html' | relative_url }}" class="section-card struggles-card">
                <div class="card-icon">⚡</div>
                <h3>Navigate Daily Friction</h3>
                <p>Practical guides for specific situations that create challenges. Each includes what it feels like, why it happens, and immediate + long-term strategies that actually work.</p>
                <div class="section-examples">Communication • Executive function • Sensory overload • Emotional regulation</div>
            </a>

            <a href="{{ '/toolkits/index.html' | relative_url }}" class="section-card toolkits-card">
                <div class="card-icon">💼</div>
                <h3>Strategic System Navigation</h3>
                <p>Step-by-step guidance for advocating within institutional systems. Professional tools for workplace accommodations, healthcare navigation, and legal advocacy.</p>
                <div class="section-examples">Workplace advocacy • Healthcare systems • Educational accommodations • Financial management</div>
            </a>
        </div>

        <!-- FEATURED ARTICLES SECTION -->
        <div class="featured-section">
            <h2>Featured Resources</h2>
            <p>Our most comprehensive and helpful guides for understanding common neurodivergent experiences</p>
            
            <div class="featured-grid" id="featuredGrid">
                <!-- Featured articles will be inserted here by JavaScript -->
            </div>
        </div>

        <!-- RANDOM STRUGGLES SECTION -->
        <div class="random-section">
            <h2>Explore Random Struggles</h2>
            <p>Not sure where to start? Discover struggles you might not have realized had a name or explanation</p>
            
            <button class="random-button" onclick="loadRandomStruggles()">
                🎲 Show Me Random Struggles
            </button>
            
            <div class="random-struggles" id="randomStruggles">
                <!-- Random struggles will be inserted here -->
            </div>
        </div>

        <div class="share-experience">
            <h3>🤝 Share Your Experience</h3>
            <p>This guide grows stronger with every perspective shared. Your daily strategies, hard-won insights, and real experiences help others who are navigating similar challenges.</p>
            
            <div class="contribution-types">
                <div class="contrib-item">
                    <strong>Strategies that actually work:</strong> Specific tools, approaches, or accommodations that help you thrive in daily life or navigate systems successfully
                </div>
                <div class="contrib-item">
                    <strong>What you wish you'd known earlier:</strong> Insights that would have saved you time, energy, or confusion if someone had explained them sooner
                </div>
                <div class="contrib-item">
                    <strong>Gaps you've noticed:</strong> Struggles or experiences that aren't well-represented in existing resources or need better coverage
                </div>
            </div>
            
            <div class="email-cta">
                <p><strong>Email us at:</strong> 
                    <a href="mailto:stories.neurodivergent.guide@gmail.com?subject=Sharing My Experience" 
                       style="color: var(--steel-dark); text-decoration: none; font-weight: 600;">
                        stories.neurodivergent.guide@gmail.com
                    </a>
                </p>
                <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem; font-style: italic;">
                    All contributions are voluntary. We'll never share your personal information, and you can contribute anonymously if preferred.
                </p>
            </div>
        </div>

        <div class="tip-jar">
            <h3>❤️ Support This Resource</h3>
            <p>This guide represents hundreds of hours of research, lived experience, and careful writing to help our community navigate daily challenges. If these resources have helped you understand yourself better or made your day a little easier, consider supporting the project.</p>
            <p><strong>All donations help:</strong> Keep this resource completely free • Cover hosting and maintenance costs • Fund ongoing research and content updates • Allow more time for creating new resources</p>
            <div class="kofi-info">
                <a href="https://ko-fi.com/neurodivergent_survival_guide" target="_blank" style="text-decoration: none; color: #333; font-weight: 600;">
                    <strong>Ko-fi.com/neurodivergent_survival_guide</strong>
                </a>
            </div>
            <p style="font-style: italic; color: #666; font-size: 0.9rem;">This guide will always remain free regardless of donations. Support only if this resource has genuinely helped you.</p>
        </div>
    </main>
</div>

<script>
// Condition colors from _data/condition_colors.yml
const conditionColors = {
    adhd: { primary: '#d63031', secondary: '#b71c1c' },
    autism: { primary: '#27ae60', secondary: '#196f3d' },
    bipolar: { primary: '#0984e3', secondary: '#002366' },
    bpd: { primary: '#f39c12', secondary: '#d68910' },
    ocd: { primary: '#9b59b6', secondary: '#8e44ad' }
};

// Generate arrays from Jekyll pages
const allStruggles = [
{% assign published_struggles = site.pages | where: "layout", "struggle" | where: "status", "published" %}
{% for struggle in published_struggles %}
    { 
        title: "{{ struggle.title | escape }}", 
        subtitle: "{{ struggle.subtitle | escape }}", 
        url: "{{ struggle.url | relative_url }}", 
        condition: "{{ struggle.condition }}" 
    }{% unless forloop.last %},{% endunless %}
{% endfor %}
];

const featuredArticles = [
{% assign featured_struggles = site.pages | where: "layout", "struggle" | where: "featured", true | where: "status", "published" %}
{% for struggle in featured_struggles limit: 12 %}
    { 
        title: "{{ struggle.title | escape }}", 
        subtitle: "{{ struggle.subtitle | escape }}", 
        url: "{{ struggle.url | relative_url }}", 
        condition: "{{ struggle.condition }}" 
    }{% unless forloop.last %},{% endunless %}
{% endfor %}
];

// Load featured articles on page load
function loadFeaturedArticles() {
    const grid = document.getElementById('featuredGrid');
    let html = '';
    
    // Handle case where we have fewer than 6 featured articles
    let articlesToShow = [...featuredArticles];
    
    // If we have fewer than 6 featured articles, repeat them to fill the grid
    if (articlesToShow.length < 6 && articlesToShow.length > 0) {
        while (articlesToShow.length < 6) {
            articlesToShow.push(...featuredArticles.slice(0, Math.min(featuredArticles.length, 6 - articlesToShow.length)));
        }
        articlesToShow = articlesToShow.slice(0, 6);
    }
    
    // If no featured articles, show message
    if (articlesToShow.length === 0) {
        grid.innerHTML = '<p style="text-align: center; color: #666;">Featured articles coming soon</p>';
        return;
    }
    
    // Shuffle for rotation effect (only if we have at least 6 unique articles)
    if (featuredArticles.length >= 6) {
        articlesToShow = [...featuredArticles].sort(() => Math.random() - 0.5).slice(0, 6);
    }
    
    articlesToShow.forEach(article => {
        const color = conditionColors[article.condition]?.primary || '#718096';
        html += `
            <a href="{{ site.baseurl }}${article.url}" class="featured-card" style="border-left-color: ${color};">
                <div class="featured-card-title">${article.title}</div>
                <div class="featured-card-subtitle">${article.subtitle}</div>
                <span class="featured-card-condition ${article.condition}">${article.condition.toUpperCase()}</span>
            </a>
        `;
    });
    
    grid.innerHTML = html;
}

// Load random struggles
function loadRandomStruggles() {
    const container = document.getElementById('randomStruggles');
    
    // Shuffle and pick 3 random struggles
    const shuffled = [...allStruggles].sort(() => Math.random() - 0.5);
    const selected = shuffled.slice(0, 3);
    
    let html = '';
    selected.forEach(struggle => {
        const color = conditionColors[struggle.condition]?.primary || '#718096';
        html += `
            <a href="{{ site.baseurl }}${struggle.url}" class="random-struggle-card" style="border-bottom-color: ${color};" 
               onmouseover="this.style.backgroundColor='${color}'; this.style.color='white';" 
               onmouseout="this.style.backgroundColor='rgba(248, 249, 255, 0.8)'; this.style.color='inherit';">
                <div class="random-struggle-title">${struggle.title}</div>
                <div class="random-struggle-subtitle">${struggle.subtitle}</div>
            </a>
        `;
    });
    
    container.innerHTML = html;
    
    // Add a little animation
    container.style.opacity = '0';
    setTimeout(() => {
        container.style.transition = 'opacity 0.5s ease';
        container.style.opacity = '1';
    }, 10);
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
    loadFeaturedArticles();
    loadRandomStruggles();
    
    // Rotate featured articles every 30 seconds
    setInterval(loadFeaturedArticles, 30000);
});

// Keep existing search implementation
let searchIndex = null;
let fuse = null;

async function initializeSearch() {
    try {
        const response = await fetch('{{ "/search-index.json" | relative_url }}');
        searchIndex = await response.json();
        
        const fuseOptions = {
            keys: [
                { name: 'title', weight: 0.4 },
                { name: 'subtitle', weight: 0.3 },
                { name: 'search_terms', weight: 0.2 },
                { name: 'description', weight: 0.1 }
            ],
            threshold: 0.4,
            distance: 100,
            minMatchCharLength: 2,
            includeScore: true,
            includeMatches: true
        };
        
        fuse = new Fuse(searchIndex, fuseOptions);
        setupSearchInterface();
        
    } catch (error) {
        console.error('Failed to load search index:', error);
        setupFallbackSearch();
    }
}

function setupSearchInterface() {
    const searchBox = document.getElementById('searchBox');
    let searchResults = document.getElementById('searchResults');
    
    if (!searchBox || !searchResults) {
        console.error('Search elements not found');
        return;
    }
    
    document.body.appendChild(searchResults);
    
    let searchTimeout;
    
    searchBox.addEventListener('input', function(e) {
        clearTimeout(searchTimeout);
        const query = e.target.value.trim();
        
        if (query.length < 2) {
            hideSearchResults();
            return;
        }
        
        searchTimeout = setTimeout(() => {
            performSearch(query);
        }, 200);
    });
    
    searchBox.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
            e.preventDefault();
            const firstResult = searchResults.querySelector('.search-result-item');
            if (firstResult) {
                window.location.href = firstResult.href;
            }
        } else if (e.key === 'Escape') {
            hideSearchResults();
            searchBox.blur();
        }
    });
    
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.search-section') && !e.target.closest('.search-results')) {
            hideSearchResults();
        }
    });
    
    searchBox.addEventListener('focus', function() {
        if (this.value.trim().length >= 2) {
            performSearch(this.value.trim());
        }
    });
}

function performSearch(query) {
    const searchResults = document.getElementById('searchResults');
    
    if (!fuse || !searchIndex) {
        console.error('Search not properly initialized');
        return;
    }
    
    const crisisTerms = ['suicide', 'suicidal', 'kill myself', 'end it all', 'want to die', 'hurt myself', 'self harm', 'crisis', 'emergency'];
    const lowerQuery = query.toLowerCase();
    const isCrisisSearch = crisisTerms.some(term => lowerQuery.includes(term));
    
    if (isCrisisSearch) {
        displayCrisisResources();
        return;
    }
    
    const results = fuse.search(query);
    displaySearchResults(results, query);
}

function displaySearchResults(results, query) {
    const searchResults = document.getElementById('searchResults');
    
    if (results.length === 0) {
        searchResults.innerHTML = `
            <div class="no-results">
                No matches found for "${query}"<br>
                <small>Try different keywords or check spelling</small>
            </div>
        `;
        showSearchResults();
        return;
    }
    
    const topResults = results.slice(0, 8);
    
    let html = '';
    
    if (query.length <= 3) {
        html += `<div class="search-hint">💡 Keep typing for more specific results</div>`;
    }
    
    topResults.forEach(result => {
        const item = result.item;
        html += `
            <a href="{{ '/' | relative_url }}${item.url.replace(/^\//, '')}" class="search-result-item">
                <div class="result-title">
                    ${item.title}
                    <span class="result-condition ${item.condition}">${item.condition.toUpperCase()}</span>
                </div>
                <div class="result-description">${item.description}</div>
            </a>
        `;
    });
    
    searchResults.innerHTML = html;
    showSearchResults();
}

function showSearchResults() {
    const searchResults = document.getElementById('searchResults');
    const searchBox = document.getElementById('searchBox');
    
    const searchBoxRect = searchBox.getBoundingClientRect();
    searchResults.style.top = (searchBoxRect.bottom + window.scrollY) + 'px';
    searchResults.style.left = searchBoxRect.left + 'px';
    searchResults.style.width = searchBoxRect.width + 'px';
    
    searchResults.classList.add('show');
}

function hideSearchResults() {
    const searchResults = document.getElementById('searchResults');
    searchResults.classList.remove('show');
}

function displayCrisisResources() {
    const searchResults = document.getElementById('searchResults');
    
    const html = `
        <div class="crisis-resources">
            <div class="crisis-header">
                🚨 Crisis Support Available Now
            </div>
            <p class="crisis-intro">If you're having thoughts of suicide or self-harm, you don't have to go through this alone. Help is available:</p>
            
            <div class="crisis-option">
                <strong>Emergency:</strong> <a href="tel:911">911</a>
            </div>
            
            <div class="crisis-option">
                <strong>Suicide & Crisis Lifeline:</strong> <a href="tel:988">988</a>
                <small>24/7 free and confidential support</small>
            </div>
            
            <div class="crisis-option">
                <strong>Crisis Text Line:</strong> <span style="color: #dc2626; font-weight: 600;">Text HOME to 741741</span>
                <small>24/7 crisis support via text</small>
            </div>
            
            <div class="crisis-footer">
                <p><strong>Remember:</strong> Crisis feelings are temporary, even when they don't feel like it. Professional counselors are trained to help you work through these moments safely.</p>
            </div>
        </div>
    `;
    
    searchResults.innerHTML = html;
    showSearchResults();
}

// Initialize search on DOM load
document.addEventListener('DOMContentLoaded', function() {
    initializeSearch();
});
</script>
