---
layout: default
title: Editorial Tools
permalink: /editorial-tools/
---
<!-- File: _pages/editorial-tools.html -->

<style>
    .tool-section {
        margin-bottom: 40px;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        background-color: #fafafa;
    }
    .tool-section h2 {
        color: #34495e;
        margin-top: 0;
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
    }
    .page-card {
        border: 1px solid #ddd;
        border-radius: 8px;
        margin: 15px 0;
        padding: 15px;
        background-color: white;
    }
    .page-card.collapsed .collapsible-content {
        display: none;
    }
    .page-title {
        font-size: 18px;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 5px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .toggle-icon {
        font-size: 14px;
        color: #7f8c8d;
    }
    .page-link {
        color: #3498db;
        text-decoration: none;
        font-size: 14px;
    }
    .page-link:hover {
        text-decoration: underline;
    }
    .search-term {
        background-color: #3498db;
        color: white;
        padding: 3px 8px;
        border-radius: 12px;
        font-size: 12px;
        margin: 2px;
        display: inline-block;
    }
    .jargon-term {
        background-color: #9b59b6;
        color: white;
        padding: 3px 8px;
        border-radius: 12px;
        font-size: 12px;
        margin: 2px;
        display: inline-block;
    }
    .count-good {
        color: #27ae60;
        font-weight: bold;
    }
    .count-warning {
        color: #f39c12;
        font-weight: bold;
    }
    .count-error {
        color: #e74c3c;
        font-weight: bold;
    }
    .strategy-section {
        margin: 5px 0;
        padding: 5px;
        background-color: #f8f9fa;
        border-radius: 3px;
    }
    .jargon-list {
        margin: 10px 0;
        padding: 10px;
        background-color: #f8f9fa;
        border-radius: 5px;
        border-left: 4px solid #9b59b6;
    }
    .collapsible-content {
        margin-top: 10px;
    }
    .toc {
        background-color: #ecf0f1;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 30px;
    }
    .toc h3 {
        margin-top: 0;
        color: #2c3e50;
    }
    .toc-section {
        margin-bottom: 15px;
    }
    .toc-section h4 {
        margin: 5px 0;
        color: #34495e;
        font-size: 16px;
    }
    .toc-link {
        display: inline-block;
        margin: 2px 5px;
        padding: 3px 8px;
        background-color: #bdc3c7;
        color: #2c3e50;
        text-decoration: none;
        border-radius: 4px;
        font-size: 12px;
    }
    .toc-link:hover {
        background-color: #95a5a6;
        color: white;
    }
    .section-controls {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 15px;
        flex-wrap: wrap;
    }
    .expand-all-btn {
        background: #3498db;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        font-size: 14px;
        cursor: pointer;
    }
    .expand-all-btn:hover {
        background: #2980b9;
    }
    .collapse-all-btn {
        background: #95a5a6;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        font-size: 14px;
        cursor: pointer;
    }
    .collapse-all-btn:hover {
        background: #7f8c8d;
    }
    .hide-compliant-checkbox {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 14px;
    }
    .hide-compliant-checkbox input {
        margin: 0;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
    }
    th, td {
        padding: 10px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }
    th {
        background-color: #f2f2f2;
        font-weight: bold;
    }
</style>

<h1>Editorial Tools</h1>

<!-- Table of Contents -->
<div class="toc">
    <h3>Table of Contents - Struggle Pages</h3>
    {% assign struggle_pages = site.pages | where: "layout", "struggle" %}
    {% assign pages_by_condition = struggle_pages | group_by: "condition" %}
    
    {% for condition_group in pages_by_condition %}
        <div class="toc-section">
            <h4>{{ condition_group.name | upcase }}</h4>
            {% for page in condition_group.items %}
                <a href="#page-{{ forloop.index }}-{{ condition_group.name }}" class="toc-link">{{ page.title }}</a>
            {% endfor %}
        </div>
    {% endfor %}
</div>

<script>
function togglePageCard(element) {
    const card = element.closest('.page-card');
    const icon = element.querySelector('.toggle-icon');
    
    card.classList.toggle('collapsed');
    
    if (card.classList.contains('collapsed')) {
        icon.textContent = '‚ñ∂';
    } else {
        icon.textContent = '‚ñº';
    }
}

function expandAllInSection(sectionClass) {
    const section = document.querySelector(`.${sectionClass}`);
    const cards = section.querySelectorAll('.page-card');
    
    cards.forEach(card => {
        card.classList.remove('collapsed');
        const icon = card.querySelector('.toggle-icon');
        if (icon) icon.textContent = '‚ñº';
    });
}

function collapseAllInSection(sectionClass) {
    const section = document.querySelector(`.${sectionClass}`);
    const cards = section.querySelectorAll('.page-card');
    
    cards.forEach(card => {
        card.classList.add('collapsed');
        const icon = card.querySelector('.toggle-icon');
        if (icon) icon.textContent = '‚ñ∂';
    });
}

function toggleCompliantVisibility(sectionClass, checkboxElement) {
    const section = document.querySelector(`.${sectionClass}`);
    const cards = section.querySelectorAll('.page-card');
    
    cards.forEach(card => {
        let isCompliant = false;
        
        // Determine compliance based on section type
        if (sectionClass === 'strategy-counter-section') {
            // Check if both strategy counts are in target range (5-8)
            const goodCounts = card.querySelectorAll('.count-good');
            isCompliant = goodCounts.length === 2; // Both sections should be good
        } else if (sectionClass === 'jargon-analysis-section') {
            // Check if jargon count is in target range (18-25)
            const jargonCountElement = card.querySelector('[data-jargon-count]');
            if (jargonCountElement) {
                const count = parseInt(jargonCountElement.dataset.jargonCount);
                isCompliant = count >= 18 && count <= 25;
            }
        }
        
        // Show/hide based on compliance and checkbox state
        if (checkboxElement.checked && isCompliant) {
            card.style.display = 'none';
        } else {
            card.style.display = 'block';
        }
    });
}

document.addEventListener('DOMContentLoaded', function() {
    // Initialize all cards as collapsed
    document.querySelectorAll('.page-card').forEach(card => {
        card.classList.add('collapsed');
        const icon = card.querySelector('.toggle-icon');
        if (icon) icon.textContent = '‚ñ∂';
    });
});
</script>

<!-- Search Terms Overview -->
<div class="tool-section search-terms-section">
    <h2>üîç Search Terms Overview</h2>
    <p>Review all search terms across struggle pages for clinical language or overly formal terms.</p>
    
    <div class="section-controls">
        <button class="expand-all-btn" onclick="expandAllInSection('search-terms-section')">Expand All</button>
        <button class="collapse-all-btn" onclick="collapseAllInSection('search-terms-section')">Collapse All</button>
    </div>
    
    {% assign page_counter = 0 %}
    {% for condition_group in pages_by_condition %}
        {% for page in condition_group.items %}
            {% assign page_counter = page_counter | plus: 1 %}
            {% assign unique_id = page_counter | append: '-' | append: condition_group.name %}
            
            <div class="page-card" id="page-{{ unique_id }}">
                <div class="page-title" onclick="togglePageCard(this)">
                    <span class="toggle-icon">‚ñ∂</span>
                    {{ page.title }}
                </div>
                
                <div class="collapsible-content">
                    <a href="{{ page.url | relative_url }}" class="page-link">View Page</a> | 
                    <a href="https://github.com/neurodivergent-survival-guide/neurodivergent-survival-guide/edit/main{{ page.path }}" class="page-link" target="_blank">Edit on GitHub</a>
                    
                    {% if page.search_terms %}
                        <div style="margin: 10px 0;">
                            <strong>Search Terms:</strong><br>
                            {% for term in page.search_terms %}
                                <span class="search-term">{{ term }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div style="margin: 10px 0; color: #e74c3c;">
                            <strong>‚ö†Ô∏è No search terms found</strong>
                        </div>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    {% endfor %}
</div>

<!-- Coping Strategy Counter -->
<div class="tool-section strategy-counter-section">
    <h2>üìù Coping Strategy Counter</h2>
    <p>Count list items in coping sections to ensure 5-8 strategies (not always 8).</p>
    
    <div class="section-controls">
        <button class="expand-all-btn" onclick="expandAllInSection('strategy-counter-section')">Expand All</button>
        <button class="collapse-all-btn" onclick="collapseAllInSection('strategy-counter-section')">Collapse All</button>
        <label class="hide-compliant-checkbox">
            <input type="checkbox" onchange="toggleCompliantVisibility('strategy-counter-section', this)">
            Hide pages with optimal strategy counts (5-8 each)
        </label>
    </div>
    
    {% assign page_counter = 0 %}
    {% for condition_group in pages_by_condition %}
        {% for page in condition_group.items %}
            {% assign page_counter = page_counter | plus: 1 %}
            {% assign unique_id = page_counter | append: '-' | append: condition_group.name %}
            {% assign content = page.content %}
            
            <!-- Count li elements - more flexible approach -->
            <!-- Look for immediate-help section with any attributes -->
            {% assign parts = content | split: 'class="immediate-help"' %}
            {% if parts.size > 1 %}
                {% assign next_five_section = parts[1] | split: '</div>' | first %}
                {% assign next_five_lis = next_five_section | split: '<li>' | size | minus: 1 %}
            {% else %}
                {% assign next_five_lis = 0 %}
            {% endif %}
            
            <!-- Look for long-term section with any attributes -->
            {% assign parts = content | split: 'class="long-term"' %}
            {% if parts.size > 1 %}
                {% assign long_term_section = parts[1] | split: '</div>' | first %}
                {% assign long_term_lis = long_term_section | split: '<li>' | size | minus: 1 %}
            {% else %}
                {% assign long_term_lis = 0 %}
            {% endif %}
            
            <div class="page-card">
                <div class="page-title" onclick="togglePageCard(this)">
                    <span class="toggle-icon">‚ñ∂</span>
                    {{ page.title }}
                </div>
                
                <div class="collapsible-content">
                    <a href="{{ page.url | relative_url }}" class="page-link">View Page</a> | 
                    <a href="https://github.com/neurodivergent-survival-guide/neurodivergent-survival-guide/edit/main{{ page.path }}" class="page-link" target="_blank">Edit on GitHub</a>
                    
                    <div class="strategy-section">
                        <strong>Next 5 Minutes:</strong> 
                        {% if next_five_lis >= 5 and next_five_lis <= 8 %}
                            <span class="count-good">{{ next_five_lis }} strategies</span>
                        {% elsif next_five_lis == 0 %}
                            <span class="count-error">Section not found</span>
                        {% else %}
                            <span class="count-warning">{{ next_five_lis }} strategies</span>
                        {% endif %}
                        (target: 5-8)
                    </div>
                    
                    <div class="strategy-section">
                        <strong>Long-term Solutions:</strong> 
                        {% if long_term_lis >= 5 and long_term_lis <= 8 %}
                            <span class="count-good">{{ long_term_lis }} strategies</span>
                        {% elsif long_term_lis == 0 %}
                            <span class="count-error">Section not found</span>
                        {% else %}
                            <span class="count-warning">{{ long_term_lis }} strategies</span>
                        {% endif %}
                        (target: 5-8)
                    </div>
                </div>
            </div>
        {% endfor %}
    {% endfor %}
</div>

<!-- Unique Jargon Terms Analysis -->
<div class="tool-section jargon-analysis-section">
    <h2>üí¨ Jargon Terms Analysis</h2>
    <p>Display and count jargon usage per page. Target: 18-25 unique terms (though repeats will show higher counts).</p>
    
    <div class="section-controls">
        <button class="expand-all-btn" onclick="expandAllInSection('jargon-analysis-section')">Expand All</button>
        <button class="collapse-all-btn" onclick="collapseAllInSection('jargon-analysis-section')">Collapse All</button>
        <label class="hide-compliant-checkbox">
            <input type="checkbox" onchange="toggleCompliantVisibility('jargon-analysis-section', this)">
            Hide pages with optimal jargon count (18-25)
        </label>
    </div>
    
    {% assign page_counter = 0 %}
    {% for condition_group in pages_by_condition %}
        {% for page in condition_group.items %}
            {% assign page_counter = page_counter | plus: 1 %}
            {% assign unique_id = page_counter | append: '-' | append: condition_group.name %}
            
            <!-- Extract jargon terms from content -->
            {% assign content_parts = page.content | split: 'class="jargon">' %}
            {% assign jargon_count = content_parts | size | minus: 1 %}
            
            <div class="page-card">
                <div class="page-title" onclick="togglePageCard(this)">
                    <span class="toggle-icon">‚ñ∂</span>
                    {{ page.title }}
                </div>
                
                <div class="collapsible-content">
                    <a href="{{ page.url | relative_url }}" class="page-link">View Page</a> | 
                    <a href="https://github.com/neurodivergent-survival-guide/neurodivergent-survival-guide/edit/main{{ page.path }}" class="page-link" target="_blank">Edit on GitHub</a>
                    
                    <div style="margin: 10px 0;">
                        <strong>Jargon Instances:</strong> 
                        <span id="jargon-count-{{ unique_id }}" data-jargon-count="{{ jargon_count }}">
                            {% if jargon_count >= 18 and jargon_count <= 25 %}
                                <span class="count-good">{{ jargon_count }}</span>
                            {% elsif jargon_count < 18 %}
                                <span class="count-warning">{{ jargon_count }} (low)</span>
                            {% else %}
                                <span class="count-error">{{ jargon_count }} (high)</span>
                            {% endif %}
                        </span>
                        <span style="font-size: 0.9em; color: #666;">(includes repeats)</span>
                    </div>
                    
                    <div class="jargon-list">
                        <strong>Terms Found:</strong><br>
                        <div id="jargon-terms-{{ unique_id }}">
                            {% assign term_list = "" %}
                            {% for part in content_parts %}
                                {% if forloop.first == false %}
                                    {% assign before_tooltip = part | split: '<span class="tooltip">' | first %}
                                    {% assign term = before_tooltip | split: '<' | first | strip %}
                                    {% if term != "" and term != " " %}
                                        {% unless term_list contains term %}
                                            <span class="jargon-term">{{ term | downcase }}</span>
                                            {% assign term_list = term_list | append: term | append: "," %}
                                        {% endunless %}
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                            
                            {% if term_list == "" %}
                                <em style="color: #999;">Unable to extract terms - view page directly to see jargon usage</em>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    {% endfor %}
</div>

<!-- Summary Statistics -->
<div class="tool-section">
    <h2>üìä Summary Statistics</h2>
    
    {% assign total_pages = struggle_pages | size %}
    {% assign pages_with_search_terms = 0 %}
    {% assign optimal_strategy_pages = 0 %}
    {% assign optimal_jargon_pages = 0 %}
    
    {% for page in struggle_pages %}
        {% if page.search_terms %}
            {% assign pages_with_search_terms = pages_with_search_terms | plus: 1 %}
        {% endif %}
        
        <!-- Count strategies -->
        {% assign content = page.content %}
        
        {% assign parts = content | split: 'class="immediate-help"' %}
        {% if parts.size > 1 %}
            {% assign next_five_section = parts[1] | split: '</div>' | first %}
            {% assign next_five_lis = next_five_section | split: '<li>' | size | minus: 1 %}
        {% else %}
            {% assign next_five_lis = 0 %}
        {% endif %}
        
        {% assign parts = content | split: 'class="long-term"' %}
        {% if parts.size > 1 %}
            {% assign long_term_section = parts[1] | split: '</div>' | first %}
            {% assign long_term_lis = long_term_section | split: '<li>' | size | minus: 1 %}
        {% else %}
            {% assign long_term_lis = 0 %}
        {% endif %}
        
        {% if next_five_lis >= 5 and next_five_lis <= 8 and long_term_lis >= 5 and long_term_lis <= 8 %}
            {% assign optimal_strategy_pages = optimal_strategy_pages | plus: 1 %}
        {% endif %}
        
        <!-- Count jargon -->
        {% assign jargon_count = page.content | split: 'class="jargon"' | size | minus: 1 %}
        {% if jargon_count >= 18 and jargon_count <= 25 %}
            {% assign optimal_jargon_pages = optimal_jargon_pages | plus: 1 %}
        {% endif %}
    {% endfor %}
    
    <table>
        <tr>
            <th>Metric</th>
            <th>Count</th>
            <th>Percentage</th>
        </tr>
        <tr>
            <td>Total Struggle Pages</td>
            <td>{{ total_pages }}</td>
            <td>100%</td>
        </tr>
        <tr>
            <td>Pages with Search Terms</td>
            <td>{{ pages_with_search_terms }}</td>
            <td>{{ pages_with_search_terms | times: 100 | divided_by: total_pages }}%</td>
        </tr>
        <tr>
            <td>Optimal Strategy Count (5-8 each)</td>
            <td>{{ optimal_strategy_pages }}</td>
            <td>{{ optimal_strategy_pages | times: 100 | divided_by: total_pages }}%</td>
        </tr>
        <tr>
            <td>Optimal Jargon Count (18-25)</td>
            <td>{{ optimal_jargon_pages }}</td>
            <td>{{ optimal_jargon_pages | times: 100 | divided_by: total_pages }}%</td>
        </tr>
    </table>
</div>
