---
layout: default
title: "Content Audit Dashboard"
permalink: /admin/content-audit/
---

<style>
.audit-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem;
}

.audit-header {
    text-align: center;
    margin-bottom: 3rem;
}

.audit-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
}

.stat-card {
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    text-align: center;
}

.stat-number {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

.audit-table {
    background: white;
    border-radius: 8px;
    overflow-x: auto;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 1rem 0.8rem;
    text-align: left;
    border-bottom: 1px solid #eee;
}

th {
    background: #f8f9fa;
    font-weight: 600;
    position: sticky;
    top: 0;
    z-index: 10;
}

.article-title {
    font-weight: 500;
    max-width: 250px;
}

.article-title a {
    text-decoration: none;
    color: #007acc;
}

.word-count {
    text-align: center;
    font-weight: 500;
    padding: 0.3rem 0.6rem;
    border-radius: 4px;
    font-size: 0.9rem;
}

.count-low { background: #ffebee; color: #c62828; }
.count-target { background: #e8f5e8; color: #2e7d32; }
.count-high { background: #fff3e0; color: #f57c00; }

.status-badge {
    display: inline-block;
    padding: 0.2rem 0.6rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 500;
}

.status-published { background: #e8f5e8; color: #2e7d32; }
.status-draft { background: #fff3e0; color: #f57c00; }

.filter-controls {
    margin-bottom: 2rem;
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
}

.filter-btn {
    padding: 0.5rem 1rem;
    border: 2px solid #007acc;
    background: white;
    color: #007acc;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
}

.filter-btn:hover,
.filter-btn.active {
    background: #007acc;
    color: white;
}

.section-targets {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 8px;
    margin-bottom: 2rem;
}

.targets-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
}

.target-item {
    text-align: center;
}

.target-range {
    font-weight: 600;
    color: #007acc;
}
</style>

<div class="audit-container">
    <div class="audit-header">
        <h1>Content Audit Dashboard</h1>
        <p>Word count analysis and quality control for all struggle articles</p>
        <small>Last updated: {{ site.time | date: "%B %d, %Y at %I:%M %p" }}</small>
    </div>

    <div class="section-targets">
        <h3>Target Word Count Ranges</h3>
        <div class="targets-grid">
            <div class="target-item">
                <div>Section 1 (What)</div>
                <div class="target-range">300-400 words</div>
            </div>
            <div class="target-item">
                <div>Section 2 (Why)</div>
                <div class="target-range">~400 words</div>
            </div>
            <div class="target-item">
                <div>Section 3 (Next 5 Min)</div>
                <div class="target-range">300-500 words</div>
            </div>
            <div class="target-item">
                <div>Section 4 (Long-term)</div>
                <div class="target-range">~550 words</div>
            </div>
            <div class="target-item">
                <div>Section 5 (Medical)</div>
                <div class="target-range">200-300 words</div>
            </div>
            <div class="target-item">
                <div>Section 6 (Validation)</div>
                <div class="target-range">~400 words</div>
            </div>
        </div>
        <p style="text-align: center; margin-top: 1rem;"><strong>Total Target: 2,150-2,550 words</strong></p>
    </div>

    <div class="audit-stats">
        <div class="stat-card">
            <div class="stat-number">{{ site.data.audit_stats.total_articles }}</div>
            <p>Total Articles</p>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ site.data.audit_stats.average_words }}</div>
            <p>Average Words</p>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ site.data.audit_stats.on_target_count }}</div>
            <p>On Target</p>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ site.data.audit_stats.under_target_count }}</div>
            <p>Under Target</p>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ site.data.audit_stats.over_target_count }}</div>
            <p>Over Target</p>
        </div>
        <div class="stat-card">
            <div class="stat-number">{{ site.data.audit_stats.draft_count }}</div>
            <p>Drafts</p>
        </div>
    </div>

    <div class="filter-controls">
        <a href="#" class="filter-btn active" onclick="filterTable('all')">All Articles</a>
        <a href="#" class="filter-btn" onclick="filterTable('under-target')">Under Target</a>
        <a href="#" class="filter-btn" onclick="filterTable('over-target')">Over Target</a>
        <a href="#" class="filter-btn" onclick="filterTable('on-target')">On Target</a>
        <a href="#" class="filter-btn" onclick="filterTable('draft')">Drafts</a>
    </div>

    <div class="audit-table">
        <table id="audit-table">
            <thead>
                <tr>
                    <th>Article Title</th>
                    <th>Condition</th>
                    <th>Status</th>
                    <th>Total Words</th>
                    <th>Section 1</th>
                    <th>Section 2</th>
                    <th>Section 3</th>
                    <th>Section 4</th>
                    <th>Section 5</th>
                    <th>Section 6</th>
                </tr>
            </thead>
            <tbody>
                {% for article in site.data.content_audit %}
                <tr class="article-row" 
                    data-total="{{ article.total_words }}"
                    data-status="{{ article.status }}"
                    data-condition="{{ article.condition }}">
                    <td class="article-title">
                        <a href="{{ article.url }}">{{ article.title }}</a>
                    </td>
                    <td>
                        <span class="condition-badge condition-{{ article.condition }}">
                            {{ article.condition | upcase }}
                        </span>
                    </td>
                    <td>
                        <span class="status-badge status-{{ article.status }}">
                            {{ article.status | capitalize }}
                        </span>
                    </td>
                    <td>
                        <span class="word-count {% if article.total_words < 2150 %}count-low{% elsif article.total_words > 2550 %}count-high{% else %}count-target{% endif %}">
                            {{ article.total_words }}
                        </span>
                    </td>
                    <td>
                        <span class="word-count {% if article.sections.what < 300 %}count-low{% elsif article.sections.what > 400 %}count-high{% else %}count-target{% endif %}">
                            {{ article.sections.what }}
                        </span>
                    </td>
                    <td>
                        <span class="word-count {% if article.sections.why < 380 %}count-low{% elsif article.sections.why > 420 %}count-high{% else %}count-target{% endif %}">
                            {{ article.sections.why }}
                        </span>
                    </td>
                    <td>
                        <span class="word-count {% if article.sections.nextFive < 300 %}count-low{% elsif article.sections.nextFive > 500 %}count-high{% else %}count-target{% endif %}">
                            {{ article.sections.nextFive }}
                        </span>
                    </td>
                    <td>
                        <span class="word-count {% if article.sections.longTerm < 500 %}count-low{% elsif article.sections.longTerm > 600 %}count-high{% else %}count-target{% endif %}">
                            {{ article.sections.longTerm }}
                        </span>
                    </td>
                    <td>
                        <span class="word-count {% if article.sections.medical < 200 %}count-low{% elsif article.sections.medical > 300 %}count-high{% else %}count-target{% endif %}">
                            {{ article.sections.medical }}
                        </span>
                    </td>
                    <td>
                        <span class="word-count {% if article.sections.validation < 380 %}count-low{% elsif article.sections.validation > 420 %}count-high{% else %}count-target{% endif %}">
                            {{ article.sections.validation }}
                        </span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
function filterTable(type) {
    // Update button states
    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    const rows = document.querySelectorAll('.article-row');
    
    rows.forEach(row => {
        const totalWords = parseInt(row.dataset.total);
        const status = row.dataset.status;
        let show = false;
        
        switch(type) {
            case 'all':
                show = true;
                break;
            case 'under-target':
                show = totalWords < 2150;
                break;
            case 'over-target':
                show = totalWords > 2550;
                break;
            case 'on-target':
                show = totalWords >= 2150 && totalWords <= 2550;
                break;
            case 'draft':
                show = status === 'draft';
                break;
        }
        
        row.style.display = show ? 'table-row' : 'none';
    });
}

// Sort table by column
function sortTable(columnIndex) {
    const table = document.getElementById('audit-table');
    const rows = Array.from(table.querySelectorAll('tbody tr'));
    
    rows.sort((a, b) => {
        const aVal = parseInt(a.cells[columnIndex].textContent) || 0;
        const bVal = parseInt(b.cells[columnIndex].textContent) || 0;
        return aVal - bVal;
    });
    
    const tbody = table.querySelector('tbody');
    rows.forEach(row => tbody.appendChild(row));
}

// Make headers clickable for sorting
document.addEventListener('DOMContentLoaded', function() {
    const headers = document.querySelectorAll('th');
    headers.forEach((header, index) => {
        if (index >= 3) { // Only make word count columns sortable
            header.style.cursor = 'pointer';
            header.addEventListener('click', () => sortTable(index));
        }
    });
});
</script>
