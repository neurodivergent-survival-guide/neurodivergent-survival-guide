---
layout: default
---
{% if page.condition %}
  {% assign colors = site.data.condition_colors[page.condition] %}
{% else %}
  {% assign colors = site.data.condition_colors['adhd'] %}
{% endif %}

{{ content }}

<style>
  .struggle-navigation {
    background: linear-gradient(135deg, {{ colors.gradient_start }}, {{ colors.gradient_end }});
    color: white;
    padding: 1rem 0;
    border-top: 1px solid rgba(255, 255, 255, 0.2);
    margin-top: 2rem;
  }

  .struggle-navigation .nav-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  .struggle-navigation .nav-link {
    background: {{ colors.primary }};
    color: white;
    padding: 0.8rem 1.5rem;
    border-radius: 25px;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
  }

  .struggle-navigation .nav-link:hover {
    background: {{ colors.secondary }};
    transform: translateY(-1px);
    color: white;
    text-decoration: none;
  }

  .struggle-navigation .nav-link.disabled {
    background: rgba(255, 255, 255, 0.2);
    color: rgba(255, 255, 255, 0.5);
  }

  .struggle-navigation .nav-position {
    color: rgba(255, 255, 255, 0.8);
    font-size: 0.9rem;
  }

  @media (max-width: 768px) {
    .struggle-navigation .nav-container {
      flex-direction: column;
      gap: 1rem;
      text-align: center;
      padding: 0 1rem;
    }
  }
</style>

{% comment %}
Flatten the struggle_order data structure into a single array for navigation
{% endcomment %}
{% assign all_struggles = '' | split: '' %}
{% for condition_data in site.data.struggle_order %}
  {% assign condition_struggles = condition_data[1] %}
  {% for struggle in condition_struggles %}
    {% assign all_struggles = all_struggles | push: struggle %}
  {% endfor %}
{% endfor %}

{% comment %}
Find the current struggle's position in the flattened array
{% endcomment %}
{% assign current_index = -1 %}
{% for struggle in all_struggles %}
  {% if struggle.slug == page.slug %}
    {% assign current_index = forloop.index0 %}
    {% break %}
  {% endif %}
{% endfor %}

<div class="struggle-navigation">
  <div class="nav-container">
    {% if current_index > 0 %}
      {% assign prev_index = current_index | minus: 1 %}
      {% assign prev_struggle = all_struggles[prev_index] %}
      <a href="{{ '/struggles/' | append: prev_struggle.slug | append: '.html' | relative_url }}" class="nav-link">← Previous: {{ prev_struggle.title }}</a>
    {% else %}
      <span class="nav-link disabled">← Previous Struggle</span>
    {% endif %}

    <span class="nav-position">{{ page.title }}</span>

    {% assign next_index = current_index | plus: 1 %}
    {% if next_index < all_struggles.size %}
      {% assign next_struggle = all_struggles[next_index] %}
      <a href="{{ '/struggles/' | append: next_struggle.slug | append: '.html' | relative_url }}" class="nav-link">Next: {{ next_struggle.title }} →</a>
    {% else %}
      <span class="nav-link disabled">Next Struggle →</span>
    {% endif %}
  </div>
</div>
